package fr.hokanosekai.commands;import fr.hokanosekai.Main;import fr.hokanosekai.db.DbConnection;import org.bukkit.ChatColor;import org.bukkit.command.Command;import org.bukkit.command.CommandExecutor;import org.bukkit.command.CommandSender;import org.bukkit.configuration.file.FileConfiguration;import org.bukkit.entity.Player;import org.bukkit.potion.PotionEffectType;import java.sql.Connection;import java.sql.PreparedStatement;import java.sql.ResultSet;import java.sql.SQLException;import java.util.UUID;public class Login implements CommandExecutor {    Main main;    FileConfiguration config;    public Login(Main main){        this.main = main;        config = main.getConfiguration();    }    @Override    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {        if (label.equalsIgnoreCase("login")){            if (sender instanceof Player){                Player player = (Player) sender;                UUID uuid = player.getUniqueId();                if (args.length == 1){                    String password = args[0];                    final DbConnection loginConnection = main.getDbManager().getLoginConnection();                    try {                        final Connection connection = loginConnection.getConnection();                        final PreparedStatement preparedStatement = connection.prepareStatement("SELECT * FROM players WHERE uuid = ? AND passwd = ?");                        preparedStatement.setString(1, uuid.toString());                        preparedStatement.setString(2, password);                        final ResultSet resultSet = preparedStatement.executeQuery();                        if (resultSet.next()){                            player.sendTitle(ChatColor.translateAlternateColorCodes('&', config.getString("msg.logged")) + player.getDisplayName(), "");                            main.getLoginManager().getPlayerLogged().put(uuid, password);                            player.removePotionEffect(PotionEffectType.BLINDNESS);                            return true;                        } else {                            player.sendMessage(ChatColor.translateAlternateColorCodes('&', config.getString("msg.notregister")));                            return true;                        }                    } catch (SQLException throwables) {                        throwables.printStackTrace();                    }                    return true;                } else {                    player.sendMessage("Usage: /login <password>");                    return true;                }            }            return true;        }        return false;    }}